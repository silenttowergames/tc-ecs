!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.v2d=void 0;var o=function(){function t(){}return t.create=function(e,n){var o=new t;return o.X=e,o.Y=n,o},t}();e.v2d=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=n(4),i=n(10),s=n(0),c=n(8),u=n(11),a=n(5),p=n(12);window.addEventListener("load",(function(){var t,e=o.canvas.create("c",160,90),n=[i.SpriteSheet.create("easter-16x16",s.v2d.create(16,16),{protagIdle:[[6,0,5],[5,0,5]]})],f={firstScene:function(){var e=t.new();t.add(e,c.body.create(32,16)),t.add(e,u.sprite.create(n[0],"protagIdle"))}},l=null;setInterval((function(){(null==t&&(l="firstScene")||null!=t.nextScene&&(l=t.nextScene))&&((t=function(t){var e=r.world.create();return e.canvas=t,e.systems.push(new p.AnimationSystem),e.systems.push(new a.DrawSystem),e}(e)).spriteSheets=n,f[l](),l=null),t.progress()}),1e3/60)}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.canvas=void 0;var o=n(0),r=n(3),i=function(){function t(){}return t.create=function(e,n,i){var s=new t;return s.cam=r.camera.create(),s.size=o.v2d.create(n,i),s.zoom=1,s.element=document.getElementById(e),s.ctx=s.element.getContext("2d"),s.refresh(),window.addEventListener("resize",(function(){return s.refresh()})),s},t.prototype.refresh=function(){var t=o.v2d.create(window.innerWidth,window.innerHeight);this.zoom=Math.min(t.X/this.size.X,t.Y/this.size.Y),this.zoom>1&&(this.zoom=Math.floor(this.zoom)),this.element.width=this.size.X*this.zoom,this.element.height=this.size.Y*this.zoom},t}();e.canvas=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.camera=void 0;var o=n(0),r=function(){function t(){}return t.create=function(){var e=new t;return e.position=o.v2d.create(0,0),e.zoom=1,e},t}();e.camera=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.world=void 0;var o=function(){function t(){this.entityCount=0,this.nextScene=null}return t.create=function(){var e=new t;return e.components={all:[],types:{}},e.systems=[],e},t.prototype.new=function(){return this.entityCount++},t.prototype.addComponent=function(t){var e=t.class();this.components.all.push(t),this.components.types[e]||(this.components.types[e]=[]),this.components.types[e].push(t)},t.prototype.add=function(t,e){e.entity=t,this.addComponent(e)},t.prototype.remove=function(t){for(var e=[],n=0;n<this.components.all.length;n++){var o=this.components.all[n];if(o.entity==t){e.push(n);var r=o.class(),i=void 0;i=this.components.types[r].indexOf(o),this.components.types[r].splice(i,1)}}for(var s=0,c=e;s<c.length;s++){i=c[s];this.components.all.splice(i,1)}},t.prototype.progress=function(){for(var t=0,e=this.systems;t<e.length;t++){e[t].update(this)}},t.prototype.get=function(t){var e;return null!==(e=this.components.types[t])&&void 0!==e?e:[]},t.prototype.getEntitiesWith=function(t){for(var e=[],n=0,o=this.get(t);n<o.length;n++){var r=o[n];e.push(r.entity)}return e},t.prototype.getComponentForEntity=function(t,e){for(var n=0,o=this.get(e);n<o.length;n++){var r=o[n];if(r.entity==t)return r}return null},t}();e.world=o},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.DrawSystem=void 0;var i=n(6),s=n(0),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.update=function(t){t.canvas.ctx.clearRect(0,0,t.canvas.element.width,t.canvas.element.height);var e=t.canvas.zoom*t.canvas.cam.zoom;for(var n in t.canvas.ctx.imageSmoothingEnabled=!1,t.getEntitiesWith("sprite")){var o=t.getComponentForEntity(+n,"sprite"),r=t.getComponentForEntity(+n,"body"),i=s.v2d.create(o.sheet.animations[o.animationID][o.frameID][0],o.sheet.animations[o.animationID][o.frameID][1]);t.canvas.ctx.drawImage(o.sheet.asset,i.X*o.sheet.tilesize.X,i.Y*o.sheet.tilesize.Y,o.sheet.tilesize.X,o.sheet.tilesize.Y,r.position.X*e,r.position.Y*e,o.sheet.tilesize.X*e,o.sheet.tilesize.Y*e)}},e}(i.system);e.DrawSystem=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.system=void 0;var o=function(){function t(){}return t.prototype.update=function(t){throw new Error("System not implemented!")},t}();e.system=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.i=void 0,e.i=function(t){return document.querySelector('[src="assets/'+t+'.png"]')}},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.body=void 0;var i=n(0),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.create=function(t,n){var o=new e;return o.position=i.v2d.create(t,n),o},e.prototype.class=function(){return"body"},e}(n(9).component);e.body=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.component=void 0;var o=function(){function t(){this.active=!0}return t.prototype.class=function(){throw new Error("No class name!")},t}();e.component=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpriteSheet=void 0;var o=n(7),r=function(){function t(){}return t.create=function(e,n,r){var i=new t;return i.asset=o.i(e),i.filename=e,i.animations=r,i.tilesize=n,i},t}();e.SpriteSheet=r},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.sprite=void 0;var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frameID=0,e.frameDuration=0,e}return r(e,t),e.create=function(t,n){var o=new e;return o.animationID=n,o.sheet=t,o},e.prototype.class=function(){return"sprite"},e}(n(9).component);e.sprite=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationSystem=void 0;var o=function(){function t(){}return t.prototype.update=function(t){var e;for(e in t.get("sprite")){e}},t}();e.AnimationSystem=o}]);